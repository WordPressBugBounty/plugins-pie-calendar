(()=>{"use strict";const e=window.wp.element,t=window.wp.plugins;var a;const{__,getLocaleData:n}=wp.i18n,{PluginDocumentSettingPanel:l}=wp.editPost,{compose:r}=wp.compose,{withSelect:i,withDispatch:c}=wp.data,{ToggleControl:s,DateTimePicker:o,PanelRow:d,Button:p,Dropdown:_,TextControl:u}=wp.components,m=null!==(a=n()[""].lang)&&void 0!==a?a:"en-us",E=r([i((e=>({postMeta:e("core/editor").getEditedPostAttribute("meta"),postType:e("core/editor").getCurrentPostType()}))),c((e=>({setPostMeta(t){e("core/editor").editPost({meta:t})}})))])((t=>{let{postType:a,postMeta:n,setPostMeta:r}=t;if((piecalGbVars.isWooActive||piecalGbVars.isEddActive)&&("product"==a||"download"==a))return null;if(piecalGbVars.explicitAllowedPostTypes&&piecalGbVars.explicitAllowedPostTypes.length>0&&!piecalGbVars.explicitAllowedPostTypes.includes(a))return null;if(piecalGbVars.hidePiecalControls)return null;const i=piecalGbVars.strings||{};return(0,e.createElement)(l,{title:i.Calendar||"Calendar",initialOpen:"true"},(0,e.createElement)(d,null,(0,e.createElement)(s,{label:i.Show_On_Calendar||"Show On Calendar",onChange:e=>r({_piecal_is_event:e}),checked:n._piecal_is_event})),(0,e.createElement)(d,null,n._piecal_is_event&&(0,e.createElement)(s,{label:i.All_Day_Event||"All Day Event",onChange:e=>r({_piecal_is_allday:e}),checked:n._piecal_is_allday})),n._piecal_is_event&&(0,e.createElement)(d,null,(0,e.createElement)(_,{className:"piecal-gb-dropdown-container",contentClassName:"piecal-gb-dropdown-content",position:"bottom right",renderToggle:t=>{let{isOpen:a,onToggle:l}=t;return(0,e.createElement)(p,{variant:"primary",onClick:l,"aria-expanded":a},""==n._piecal_start_date||null==n._piecal_start_date?(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-calendar"}),"  ",i.Start_Date||"Start Date"):(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-yes"}),"  ",i.Start_Date||"Start Date"))},renderContent:()=>(0,e.createElement)("div",null,(0,e.createElement)(o,{currentDate:n._piecal_start_date,label:i.Start_Date||"Start Date",value:n._piecal_start_date,onChange:e=>r({_piecal_start_date:e}),is12Hour:-1!==wp.date.getSettings().formats.time.toLowerCase().indexOf("a")}),(0,e.createElement)(d,null,(0,e.createElement)(p,{variant:"link",className:"piecal-clear-date-button",isDestructive:"true",onClick:e=>r({_piecal_start_date:null})},i.Clear||"Clear")))}),(0,e.createElement)(_,{className:"piecal-gb-dropdown-container",contentClassName:"piecal-gb-dropdown-content",position:"bottom right",renderToggle:t=>{let{isOpen:a,onToggle:l}=t;return(0,e.createElement)(p,{variant:"primary",onClick:l,"aria-expanded":a},""==n._piecal_end_date||null==n._piecal_end_date?(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-calendar"}),"  ",i.End_Date||"End Date"):(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-yes"}),"  ",i.End_Date||"End Date"))},renderContent:()=>(0,e.createElement)("div",null,(0,e.createElement)(o,{currentDate:""!=n._piecal_end_date?n._piecal_end_date:n._piecal_start_date,label:i.End_Date||"End Date",value:n._piecal_end_date,onChange:e=>r({_piecal_end_date:e}),is12Hour:-1!==wp.date.getSettings().formats.time.toLowerCase().indexOf("a")}),(0,e.createElement)(d,null,(0,e.createElement)(p,{variant:"link",className:"piecal-clear-date-button",isDestructive:"true",onClick:e=>r({_piecal_end_date:null})},i.Clear||"Clear")))})),""!=n._piecal_start_date&&null!=n._piecal_start_date&&(0,e.createElement)(d,null,(0,e.createElement)("p",null,(i.Starts_on_||"Starts on ")+new Date(n._piecal_start_date).toLocaleDateString(m.replace("_","-"),{weekday:"long",year:"numeric",month:"short",day:"numeric"}))),""!=n._piecal_end_date&&null!=n._piecal_end_date&&(0,e.createElement)(d,null,(0,e.createElement)("p",null,(i.Ends_on_||"Ends on ")+new Date(n._piecal_end_date).toLocaleDateString(m.replace("_","-"),{weekday:"long",year:"numeric",month:"short",day:"numeric"}))))}));(0,t.registerPlugin)("piecal-postmeta-plugin",{render:()=>(0,e.createElement)(E,null)})})();