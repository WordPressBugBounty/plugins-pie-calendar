(()=>{"use strict";const e=window.wp.element,t=window.wp.plugins;var a;const{__,getLocaleData:l}=wp.i18n,{PluginDocumentSettingPanel:n}=wp.editPost,{compose:c}=wp.compose,{withSelect:i,withDispatch:r}=wp.data,{ToggleControl:o,DateTimePicker:s,PanelRow:p,Button:d,Dropdown:_,TextControl:m}=wp.components,u=null!==(a=l()[""].lang)&&void 0!==a?a:"en-us",g=c([i((e=>({postMeta:e("core/editor").getEditedPostAttribute("meta"),postType:e("core/editor").getCurrentPostType()}))),r((e=>({setPostMeta(t){e("core/editor").editPost({meta:t})}})))])((t=>{let{postType:a,postMeta:l,setPostMeta:c}=t;return!piecalGbVars.isWooActive&&!piecalGbVars.isEddActive||"product"!=a&&"download"!=a?piecalGbVars.explicitAllowedPostTypes&&piecalGbVars.explicitAllowedPostTypes.length>0&&!piecalGbVars.explicitAllowedPostTypes.includes(a)?null:(0,e.createElement)(n,{title:__("Calendar","piecal"),initialOpen:"true"},(0,e.createElement)(p,null,(0,e.createElement)(o,{label:__("Show On Calendar","piecal"),onChange:e=>c({_piecal_is_event:e}),checked:l._piecal_is_event})),(0,e.createElement)(p,null,l._piecal_is_event&&(0,e.createElement)(o,{label:__("All Day Event","piecal"),onChange:e=>c({_piecal_is_allday:e}),checked:l._piecal_is_allday})),l._piecal_is_event&&(0,e.createElement)(p,null,(0,e.createElement)(_,{className:"piecal-gb-dropdown-container",contentClassName:"piecal-gb-dropdown-content",position:"bottom right",renderToggle:t=>{let{isOpen:a,onToggle:n}=t;return(0,e.createElement)(d,{variant:"primary",onClick:n,"aria-expanded":a},""==l._piecal_start_date||null==l._piecal_start_date?(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-calendar"}),"  ",__("Start Date","piecal")):(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-yes"}),"  ",__("Start Date","piecal")))},renderContent:()=>(0,e.createElement)("div",null,(0,e.createElement)(s,{currentDate:l._piecal_start_date,label:__("Start Date","piecal"),value:l._piecal_start_date,onChange:e=>c({_piecal_start_date:e}),is12Hour:-1!==wp.date.getSettings().formats.time.toLowerCase().indexOf("a")}),(0,e.createElement)(p,null,(0,e.createElement)(d,{variant:"link",className:"piecal-clear-date-button",isDestructive:"true",onClick:e=>c({_piecal_start_date:null})},__("Clear","piecal"))))}),(0,e.createElement)(_,{className:"piecal-gb-dropdown-container",contentClassName:"piecal-gb-dropdown-content",position:"bottom right",renderToggle:t=>{let{isOpen:a,onToggle:n}=t;return(0,e.createElement)(d,{variant:"primary",onClick:n,"aria-expanded":a},""==l._piecal_end_date||null==l._piecal_end_date?(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-calendar"}),"  ",__("End Date","piecal")):(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-yes"}),"  ",__("End Date","piecal")))},renderContent:()=>(0,e.createElement)("div",null,(0,e.createElement)(s,{currentDate:l._piecal_end_date,label:__("End Date","piecal"),value:l._piecal_end_date,onChange:e=>c({_piecal_end_date:e}),is12Hour:-1!==wp.date.getSettings().formats.time.toLowerCase().indexOf("a")}),(0,e.createElement)(p,null,(0,e.createElement)(d,{variant:"link",className:"piecal-clear-date-button",isDestructive:"true",onClick:e=>c({_piecal_end_date:null})},__("Clear","piecal"))))})),""!=l._piecal_start_date&&null!=l._piecal_start_date&&(0,e.createElement)(p,null,(0,e.createElement)("p",null,__("Starts on ","piecal")+new Date(l._piecal_start_date).toLocaleDateString(u.replace("_","-"),{weekday:"long",year:"numeric",month:"short",day:"numeric"}))),""!=l._piecal_end_date&&null!=l._piecal_end_date&&(0,e.createElement)(p,null,(0,e.createElement)("p",null,__("Ends on ","piecal")+new Date(l._piecal_end_date).toLocaleDateString(u.replace("_","-"),{weekday:"long",year:"numeric",month:"short",day:"numeric"})))):null}));(0,t.registerPlugin)("piecal-postmeta-plugin",{render:()=>(0,e.createElement)(g,null)})})();